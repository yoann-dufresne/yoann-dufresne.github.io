<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
	  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-type" content="text/html;charset=UTF-8" />
    <meta http-equiv="cache-control" content="no-cache" />
    <title>
      Bibtex-js Callback Test
    </title>

    <script src="../../src/bibtex_js.js" type="text/javascript" charset="utf-8"></script>
    <bibtex src="testing.bib"></bibtex>

    <style>
      bibtex { display: none; }
      #bibtex_errors { margin-top:10px; color: red;}
    </style>
  </head>
  <body>

    <!-- This file is for testing the callbacks in bibtex_js -->

    <div id="bibtex_errors"></div>
    <h1>Bibtex-js Callback Test</h1>

    <div id="bibtex_display" callback="hideAll(bibtex_display)">
	<div class="bibtex_template" callback="count(bibtexentry)">
	</div>
    </div>

    <script type="text/javascript">
     function hideAll(bibtex_display){
	 var bibtexEntries = bibtex_display.querySelectorAll(".bibtexentry");
	 for (var i = 0; i < bibtexEntries.length; ++i) {
	     var node = document.createTextNode("bibtex_display");
	     bibtexEntries[i].appendChild(node);
	 }
     }
     var counter = 0;
     function count(bibtexentry){
	 var node = document.createTextNode(counter++);
	 bibtexentry.appendChild(node);
     }
    </script>

  </body>
</html>
